(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),l=a.n(s),c=(a(100),a(8)),o=a(6),i=a(10),u=a(11),p=a(12),m=a(30),d=(a(101),a(14)),h=a(9),f=a.n(h),g=a(158),E=a(74),v=a.n(E),b=a(72),y=a.n(b),O=function(e){var t=function(){window.history.back()};return r.a.createElement("nav",{className:"navbar",id:"navbar"},function(){if(e.showBackNavButton)return r.a.createElement(g.a,{className:"back-btn",onClick:t},r.a.createElement(y.a,null))}(e.showBackNavButton),r.a.createElement("div",{className:"nav-title"},e.pageTitle),r.a.createElement(d.b,{className:"profileIcon",onClick:function(){f.a.delete("/api/auth/logout").then((function(){e.setUser(null)}))},to:"/"},r.a.createElement(v.a,null)))},j=a(45),N=a(162),k=a(163),S=a(77),w=a.n(S),C=a(78),P=a.n(C),D=a(79),T=a.n(D),_=a(80),B=a.n(_);function x(){var e=r.a.useState(0),t=Object(j.a)(e,2),a=t[0],n=t[1];return r.a.createElement(N.a,{value:a,className:"bottom-nav",id:"bottom-nav",onChange:function(e,t){n(t)},showLabels:!0},r.a.createElement(k.a,{component:d.b,to:"/",label:"Home",icon:r.a.createElement(w.a,null)}),r.a.createElement(k.a,{component:d.b,label:"Messages",to:"/posts",icon:r.a.createElement(P.a,null)}),r.a.createElement(k.a,{component:d.b,label:"Calender",to:"/calender",icon:r.a.createElement(T.a,null)}),r.a.createElement(k.a,{component:d.b,label:"Documents",to:"/files",icon:r.a.createElement(B.a,null)}))}var A=a(164),M=a(165),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){f.a.delete("/api/auth/logout").then((function(){a.props.setUser(null)}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log("Profile Data",this.props),r.a.createElement(A.a,null,r.a.createElement("div",{className:"profileCard"},r.a.createElement("h1",null,"Hello ",this.props.profile.user.firstName," "," !"),r.a.createElement("img",{src:this.props.profile.user.image,alt:"John Doe"}),r.a.createElement("h2",null,this.props.profile.user.title," ",this.props.profile.user.firstName," ",this.props.profile.user.lastName),r.a.createElement("p",{className:"E-Mail"},this.props.profile.user.email),r.a.createElement("p",{className:"Phone"},this.props.profile.user.phone),r.a.createElement("h3",null,"Your properties:"),this.props.profile.user.property.map((function(e){return r.a.createElement("div",null,r.a.createElement("p",{key:e._id,className:"Assigned properties:"},e.property_name))}))),r.a.createElement("h4",null,"Access role: ",this.props.profile.user.accessRole," "),r.a.createElement(d.b,{className:"profileIcon",onClick:this.logout},r.a.createElement(M.a,{variant:"contained","aria-label":"logout"},"Logout")))}}]),t}(n.Component),L=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement(U,{profile:this.props,setUser:this.props.setUser}))}}]),t}(n.Component),I=a(166),z=a(167),F=a(82),H=a.n(F),R=a(84),W=a.n(R),J=a(83),q=a.n(J),V=a(81),Y=a.n(V),Z=function(e){var t=e.data;return r.a.createElement(d.b,{to:{pathname:"/posts/".concat(t._id),data:t}},r.a.createElement(I.a,{key:t._id},r.a.createElement("img",{src:t.image,alt:"ticket"}),r.a.createElement("div",{className:"bg-overlay"}),r.a.createElement(z.a,null,r.a.createElement("div",{className:"post-title"},t.title),r.a.createElement("div",{className:"post-status"},r.a.createElement("div",{className:"post-status-icon"}," ",function(){switch(t.status){case"open":return r.a.createElement(Y.a,{fontSize:"small"});case"accepted":return"accepted";case"in progress":return r.a.createElement(H.a,{fontSize:"small"});case"done":return r.a.createElement(q.a,{fontSize:"small"});default:return"nix"}}()),r.a.createElement("div",{className:"post-status-time"},function(e){var t=new Date(e),a=new Date,n=Math.abs(a-t)/1e3,r=Math.floor(n/86400);n-=86400*r;var s=Math.floor(n/3600);n-=3600*s;var l=Math.floor(n/60);return n-=60*l,r>1?"".concat(r,"d"):s>1?"".concat(s,"h"):"".concat(l,"m")}(t.created_at))))))},$=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[]},a.getData=function(){f.a.get("/api/posts?property=".concat(a.props.selectedProperty)).then((function(e){a.setState({posts:e.data})}))},a.getNewestPosts=function(){f.a.get("/api/posts?sortBy=created_at").then((function(e){a.setState({posts:e.data})}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t,a){e.selectedProperty!==this.props.selectedProperty&&this.getData()}},{key:"render",value:function(){var e=this.state.posts;return console.log("property: ",this.posts),r.a.createElement("div",{className:"posts-wrapper"},r.a.createElement(d.b,{to:"/new-post"},r.a.createElement(I.a,{id:"new-post"},r.a.createElement(z.a,null,r.a.createElement(W.a,{style:{fontSize:"5rem"}})))),e.map((function(e){return r.a.createElement(Z,{key:e._id,data:e})})))}}]),t}(n.Component),G=a(168),K=a(169),Q=a(37),X=a.n(Q),ee=Object(G.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",overflow:"hidden",backgroundColor:"#335CFF",padding:"0px"},gridList:{flexWrap:"nowrap",textAlign:"left",transform:"translateZ(0)",margin:"0px"},title:{backgroundColor:"white"},card:{backgroundColor:"#335CFF",color:"#f7f7f7",textAlgin:"left",height:"160px",minWidth:"90px"},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}}}));function te(e){var t=ee();return r.a.createElement(A.a,{className:"announcementContainer"},r.a.createElement(K.a,{className:t.gridList,cols:.5},e.announcements.map((function(e){return r.a.createElement(d.b,{key:e._id,to:"/announcement/".concat(e._id)},r.a.createElement(I.a,null,r.a.createElement(z.a,{className:t.card},r.a.createElement("div",{className:"announcement-title"},e.title),r.a.createElement("div",{className:"announcement-content"}),r.a.createElement("div",{className:"post-status"},r.a.createElement("p",null),r.a.createElement("div",{className:"announcement-time"},r.a.createElement(X.a,{date:e.created_at}))))))}))))}var ae=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={announcements:[]},a.getData=function(){f.a.get("/api/announcements?property=".concat(a.props.selectedProperty)).then((function(e){a.setState({announcements:e.data})}))},a.getNewestAnnouncements=function(){f.a.get("/api/announcements?sortBy=created_at").then((function(e){a.setState({announcements:e.data})}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t,a){e.selectedProperty!==this.props.selectedProperty&&this.getData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(te,{announcements:this.state.announcements}))}}]),t}(n.Component),ne=a(179),re=a(177),se=a(85),le=a.n(se),ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.componentDidMount=function(){console.log("dashboard props:",a.props),a.props.backButton.off(),a.props.setPageTitle("House Log")},a.handlePropertySelect=function(e){a.props.setSelectedProperty(e.target.value)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(A.a,null,r.a.createElement("div",{className:"dashboardHeader"},r.a.createElement("p",{style:{width:"100%",display:"flex",justifyContent:"space-between"}},r.a.createElement(le.a,{className:"locationDropown"}),r.a.createElement(ne.a,{className:"locationDropown",style:{width:"90%"}},r.a.createElement(re.a,{native:!0,value:this.props.selectedProperty,onChange:this.handlePropertySelect,inputProps:{name:"property",id:"age-native-simple"}},function(){var t;if(e.props.user&&e.props.user.property)return null===(t=e.props)||void 0===t?void 0:t.user.property.map((function(e,t){return r.a.createElement("option",{value:e._id,key:t},"".concat(e.property_street,", ").concat(e.property_postal))}))}())))),r.a.createElement(ae,{selectedProperty:this.props.selectedProperty}),r.a.createElement($,Object.assign({},this.props,{selectedProperty:this.props.selectedProperty})))}}]),t}(n.Component),oe=a(17),ie=a(178),ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(oe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),f.a.post("/api/auth/login",{email:a.state.email,password:a.state.password}).then((function(e){a.props.setUser(e.data),a.props.history.push("/"),console.log(e)})).catch((function(e){a.setState({message:e.message})}))},a.state={email:"",password:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{className:"login"},r.a.createElement("div",{className:"loginHeader"},r.a.createElement("h3",null,"House Log")),r.a.createElement("div",{className:"loginSubHeader"},r.a.createElement("h4",null,"Manage properties efficiently.")),this.state.message?r.a.createElement("div",null,e.state.message):"",r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"on"},r.a.createElement(ne.a,null,r.a.createElement("div",{className:"loginEmail"},r.a.createElement(ie.a,{name:"email",id:"email",type:"email",label:"E-Mail",variant:"filled",onChange:this.handleChange,required:!0,autoComplete:"current-email"}))),r.a.createElement(ne.a,null,r.a.createElement("div",{className:"loginPassword"},r.a.createElement(ie.a,{name:"password",id:"password",type:"password",label:"Password",variant:"filled",onChange:this.handleChange,required:!0,autoComplete:"current-password"}))),r.a.createElement("div",{className:"loginButton"},r.a.createElement(M.a,{size:"large",color:"inherit",type:"submit"},"Login"))))}}]),t}(n.Component),pe=a(128),me=a(172),de=a(42),he=a.n(de),fe=a(43),ge=a.n(fe),Ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={post:null},a.deletePost=function(){console.log("/api/posts/".concat(a.state.post._id)),f.a.delete("/api/posts/".concat(a.state.post._id)).then((function(e){return a.props.history.push("/")})).catch((function(e){return console.log(e)}))},a.editPost=function(){a.props.history.push("/posts/".concat(a.state.post._id,"/edit"))},a.handleUpvote=function(){var e=a.props.match.params.postId;f.a.post("/api/posts/".concat(e,"/upvote")).then((function(e){a.setState({post:e.data})}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;this.props.backButton.on(),this.props.setPageTitle("Message"),this.props.location.data?this.setState({post:this.props.location.data}):f.a.get("/api/posts/".concat(t)).then((function(t){e.setState({post:t.data})}))}},{key:"render",value:function(){if(console.log("props.user",this.props.user),console.log("state.post",this.state.post),!this.state.post)return"loAding";var e=this.state.post;return r.a.createElement(A.a,{className:"post-detail"},r.a.createElement(pe.a,{elevation:1,variant:"outlined",className:"post-image-wrapper"},r.a.createElement("img",{src:null===e||void 0===e?void 0:e.image,alt:"ticket"})),this.props.user._id===this.state.post.author._id||"moderator"===this.props.user.role||"admin"===this.props.user.role?r.a.createElement("div",{className:"post-detail-action-icons"},r.a.createElement(g.a,{"aria-label":"delete",onClick:this.deletePost},r.a.createElement(he.a,{fontSize:"large"})),r.a.createElement(g.a,{"aria-label":"edit",onClick:this.editPost},r.a.createElement(ge.a,{fontSize:"large"}))):"",r.a.createElement(me.a,null),r.a.createElement("div",{className:"post-detail-title "},e.title),r.a.createElement("div",{className:"post-detail-content"},e.content),r.a.createElement("div",{className:"post-detail-author"},e.author.lastName,",",e.author.firstName))}}]),t}(n.Component),ve=a(86),be=a(175),ye=a(176),Oe=a(181),je=a(182),Ne=a(173),ke=a(174),Se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:null,content:"",image:"",photo:null,private:!0,transfering:!1,message:""},a.handleFileChange=function(e){e.preventDefault(),a.setState({photo:e.target.files[0],photo_url:URL.createObjectURL(e.target.files[0])})},a.handleSwitch=function(e){a.setState(Object(oe.a)({},e.target.name,e.target.checked))},a.handleDelete=function(e){a.setState({photo:null,photo_url:null})},a.handleChange=function(e){a.setState(Object(oe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.set("title",a.state.title),t.set("content",a.state.content),t.set("private",a.state.private),t.set("property",a.props.selectedProperty),t.append("image",a.state.photo),t.set("imageUrl",a.state.image);var n={headers:{"content-type":"multipart/form-data"}};if(a.setState({transfering:!0}),a.props.edit){var r=a.props.match.params.postId;f.a.put("/api/posts/".concat(r),t,n).then((function(e){a.props.history.push("/posts/".concat(e.data._id))})).catch((function(e){console.log(e),a.setState({transfering:!1,message:e})}))}else f.a.post("/api/posts",t,n).then((function(e){a.props.history.push("/posts/".concat(e.data._id))})).catch((function(e){console.log(e),a.setState({transfering:!1,message:e})}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.backButton.on(),this.props.edit){this.props.setPageTitle("Edit Message");var t=this.props.match.params.postId;f.a.get("/api/posts/".concat(t)).then((function(t){console.log("response"),e.setState(Object(ve.a)({},t.data,{photo_url:t.data.image}))}))}else this.props.setPageTitle("New Message")}},{key:"render",value:function(){var e=this;console.log("Transfering: ",this.state.transfering);return this.state.transfering?r.a.createElement(A.a,null,r.a.createElement(be.a,null)):r.a.createElement(A.a,{className:"post-new"},r.a.createElement("form",{className:"create-post",onSubmit:this.handleSubmit},e.state.photo||e.state.photo_url?r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{variant:"outlined",elevation:1,className:"post-image-wrapper"},r.a.createElement("img",{src:e.state.photo_url})),r.a.createElement(g.a,{onClick:e.handleDelete},r.a.createElement(Ne.a,null))):r.a.createElement("label",{htmlFor:"icon-button-file"},r.a.createElement(pe.a,{elevation:1,variant:"outlined",className:"post-image-wrapper"},r.a.createElement("input",{accept:"image/*",style:{display:"none"},onChange:e.handleFileChange,id:"icon-button-file",type:"file"}),r.a.createElement(g.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(ke.a,{color:"inherit",style:{color:"white"}})))),r.a.createElement(ie.a,{id:"standard-basic",label:"Title",type:"text",name:"title",value:this.state.title,onChange:this.handleChange}),r.a.createElement(ie.a,{id:"outlined-multiline-static",label:"Message",name:"content",multiline:!0,rows:"4",onChange:this.handleChange,value:this.state.content,defaultValue:"Type your message here!",variant:"outlined"}),r.a.createElement(ye.a,null,r.a.createElement(Oe.a,{control:r.a.createElement(je.a,{checked:this.state.private,onChange:this.handleSwitch,name:"private",value:"private"}),label:"Private Message? "}),r.a.createElement("div",{className:"help-text"},"(Only visible for the property management)")),r.a.createElement(M.a,{variant:"contained",color:"primary",type:"submit"},"Send")))}}]),t}(n.Component),we=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.setPageTitle("Messages")}},{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement($,Object.assign({},this.props,{selectedProperty:this.props.selectedProperty})))}}]),t}(n.Component),Ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={announcement:null},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.announcementId;f.a.get("/api/announcements/".concat(t)).then((function(t){e.setState({announcement:t.data})}))}},{key:"render",value:function(){var e=this.state.announcement;return e?r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"announcementCardsDetail"},r.a.createElement(z.a,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,e.title),r.a.createElement("h5",null,"valid from ",new Date(e.announcedAt).toLocaleDateString("de-De")," until ",new Date(e.announcedAt).toLocaleDateString("de-De")),r.a.createElement("p",null,e.content))),r.a.createElement("div",{className:"announcement-detail-action-icons"},r.a.createElement(g.a,{"aria-label":"delete"},r.a.createElement(he.a,{fontSize:"large"})),r.a.createElement(g.a,{"aria-label":"delete"},r.a.createElement(ge.a,{fontSize:"large"}))),r.a.createElement("div",{className:"post-detail-action-icons"},r.a.createElement("img",{src:e.image,alt:e.title})),r.a.createElement("div",{style:{fontSize:"10px"}},"last update: ",r.a.createElement(X.a,{date:e.updated_at}))))):r.a.createElement("div",null,"Loading")}}]),t}(n.Component),Pe=a(87),De=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={search:""},a.updateSearch=function(e){console.log("SEARCH",e),a.setState({search:e})},a.changeText=function(e){a.setState({search:e.target.value})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this;return e=this.props.files.filter((function(e){return e.title.includes(t.state.search)})),r.a.createElement("div",null,r.a.createElement(pe.a,{className:"calenderSerachBarContainer",component:"form"},r.a.createElement(Pe.a,{className:"calenderSerachBar",placeholder:"Search documents",value:this.state.searchText,onChange:this.changeText})),e.map((function(e){return r.a.createElement(I.a,{key:e._id,className:"cards-fileList"},r.a.createElement(d.b,{key:e._id,to:"/files/".concat(e._id)},r.a.createElement("div",{className:"fileCards",key:e._id},r.a.createElement("div",{className:"fileCardsTitle"},r.a.createElement("h4",null,e.title," ")),r.a.createElement("div",{className:"fileCardsCategory"},r.a.createElement("h4",null,e.category)),r.a.createElement("div",{className:"fileCardsDate"},new Date(e.announcedAt).toLocaleDateString("de-De")))))})))}}]),t}(n.Component),Te=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={files:[]},a.getData=function(){f.a.get("/api/files").then((function(e){a.setState({files:e.data})}))},a.getNewestFiles=function(){f.a.get("/api/files?sortBy=created_at").then((function(e){a.setState({files:e.data})}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.setPageTitle("Documents"),this.getData()}},{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement(De,{files:this.state.files}))}}]),t}(n.Component),_e=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={file:null},a.handleDelete=function(){var e=a.props.match.params.fileId;f.a.delete("/api/files/delete/".concat(e)).then((function(e){console.log("file deleted")})),a.props.history.push("/")},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.setPageTitle("Document");var t=this.props.match.params.fileId;f.a.get("/api/files/".concat(t)).then((function(t){e.setState({file:t.data})}))}},{key:"render",value:function(){var e=this.state.file;return e?r.a.createElement("div",null,r.a.createElement(I.a,{className:"fileDetailCardOne"},r.a.createElement(z.a,{className:"filesDetailCardContent"},r.a.createElement("div",null,r.a.createElement("h2",null,e.title),r.a.createElement("h4",null,e.category),r.a.createElement("h5",null,"last update: ",new Date(e.updated_at).toLocaleDateString("de-De"))),r.a.createElement("p",null,e.content),r.a.createElement("div",{className:"file-detail-action-icons"},r.a.createElement(g.a,{onClick:this.handleDelete,"aria-label":"delete"},r.a.createElement(he.a,{fontSize:"large"})),r.a.createElement(g.a,{"aria-label":"edit"},r.a.createElement(ge.a,{fontSize:"large"}))," "))),r.a.createElement(I.a,{className:"fileDetailCardTwo"},r.a.createElement("img",{id:"img",src:e.url,alt:e.title}))):r.a.createElement("div",null,"Loading")}}]),t}(n.Component),Be=Object(m.e)(_e),xe=a(28),Ae=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={search:""},a.updateSearch=function(e){console.log("SEARCH",e),a.setState({search:e})},a.changeText=function(e){a.setState({search:e.target.value})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this;return e=this.props.calenders.filter((function(e){return e.title.includes(t.state.search)})),r.a.createElement("div",null,r.a.createElement(pe.a,{className:"calenderSerachBarContainer",component:"form"},r.a.createElement(Pe.a,{className:"calenderSerachBar",placeholder:"Search calender",value:this.state.searchText,onChange:this.changeText})),e.map((function(e){return r.a.createElement(d.b,{key:e._id,to:"/posts/".concat(e._id)},r.a.createElement("div",{className:"calenderCards",key:e._id},r.a.createElement("div",{className:"calenderCardsTitle"},r.a.createElement("h4",null,e.title," ")),r.a.createElement("h4",{className:"calenderCardsStatus"}," ",e.status),r.a.createElement(X.a,{className:"calenderCardsDate",date:e.announcedAt}),r.a.createElement(X.a,{className:"calenderCardsDate",date:e.dueDate})))})))}}]),t}(n.Component),Me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={calenders:[]},a.getData=function(){f.a.get("/api/announcements?property=".concat(a.props.selectedProperty)).then((function(e){a.setState({calenders:e.data},(function(){f.a.get("/api/posts?property=".concat(a.props.selectedProperty)).then((function(e){a.setState({calenders:[].concat(Object(xe.a)(a.state.calenders),Object(xe.a)(e.data))})}))}))}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.setPageTitle("Calendar"),this.getData()}},{key:"render",value:function(){var e=Object(xe.a)(this.state.calenders).sort((function(e,t){var a=t.announcedAt?"announcedAt":"dueDate",n=e.announcedAt?"announcedAt":"dueDate";return new Date(e[n])-new Date(t[a])}));return r.a.createElement(A.a,null,r.a.createElement(Ae,{calenders:e}))}}]),t}(n.Component),Ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,pageTitle:"",backNavButton:!1},a.setUser=function(e){null===e?a.setState({user:null,selectedProperty:null}):a.setState({user:e,selectedProperty:e.property[0]._id})},a.backButtonOn=function(){console.log("backbutton on"),a.setState({backNavButton:!0})},a.backButtonOff=function(){console.log("backbutton off"),a.setState({backNavButton:!1})},a.setPageTitle=function(e){a.setState({pageTitle:e})},a.setSelectedProperty=function(e){a.setState({selectedProperty:e})},a.componentDidMount=function(){a.setPageTitle("House Log"),a.props.user&&a.setUser(a.props.user)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(!this.state.user)return r.a.createElement("div",{className:"App"},r.a.createElement(ue,{history:this.props.history,setUser:this.setUser}));var t={on:this.backButtonOn,off:this.backButtonOff};return r.a.createElement("div",{className:"App"},r.a.createElement(O,{setUser:this.setUser,showBackNavButton:this.state.backNavButton,pageTitle:this.state.pageTitle,user:this.state.user}),r.a.createElement(m.a,{exact:!0,path:"/",render:function(a){return r.a.createElement(ce,Object.assign({},a,{backButton:t,setPageTitle:e.setPageTitle,selectedProperty:e.state.selectedProperty,setSelectedProperty:e.setSelectedProperty,user:e.state.user}))}}),r.a.createElement(m.a,{exact:!0,path:"/announcement/:announcementId",render:function(e){return r.a.createElement(Ce,e)}}),r.a.createElement(m.a,{exact:!0,path:"/new-post",render:function(a){return r.a.createElement(Se,Object.assign({},a,{backButton:t,setPageTitle:e.setPageTitle,selectedProperty:e.state.selectedProperty}))}}),r.a.createElement(m.a,{exact:!0,path:"/posts/:postId",render:function(a){return r.a.createElement(Ee,Object.assign({},a,{backButton:t,setPageTitle:e.setPageTitle,user:e.state.user}))}}),r.a.createElement(m.a,{exact:!0,path:"/posts/:postId/edit",render:function(a){return r.a.createElement(Se,Object.assign({},a,{backButton:t,setPageTitle:e.setPageTitle,selectedProperty:e.state.selectedProperty,edit:!0}))}}),r.a.createElement(m.a,{exact:!0,path:"/posts",render:function(t){return r.a.createElement(we,Object.assign({},t,{selectedProperty:e.state.selectedProperty,setPageTitle:e.setPageTitle}))}}),r.a.createElement(m.a,{exact:!0,path:"/calender",render:function(t){return r.a.createElement(Me,Object.assign({},t,{selectedProperty:e.state.selectedProperty,setPageTitle:e.setPageTitle}))}}),r.a.createElement(m.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(L,Object.assign({},t,{setUser:e.setUser,showBackNavButton:e.state.backNavButton,pageTitle:e.state.pageTitle,user:e.state.user}))}}),r.a.createElement(m.a,{exact:!0,path:"/files",render:function(t){return r.a.createElement(Te,Object.assign({},t,{setPageTitle:e.setPageTitle}))}}),r.a.createElement(m.a,{exact:!0,path:"/files/:fileId",render:function(t){return r.a.createElement(Be,Object.assign({},t,{setPageTitle:e.setPageTitle}))}}),r.a.createElement(x,{className:"bottom-nav"}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.a.get("/api/auth/loggedin").then((function(e){l.a.render(r.a.createElement(d.a,null,r.a.createElement(Ue,{user:e.data})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a(127)}},[[95,1,2]]]);
//# sourceMappingURL=main.c2d48236.chunk.js.map